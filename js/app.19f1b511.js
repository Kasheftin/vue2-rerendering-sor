(function(e){function t(t){for(var r,o,u=t[0],i=t[1],c=t[2],p=0,m=[];p<u.length;p++)o=u[p],Object.prototype.hasOwnProperty.call(s,o)&&s[o]&&m.push(s[o][0]),s[o]=0;for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r]);l&&l(t);while(m.length)m.shift()();return a.push.apply(a,c||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],r=!0,u=1;u<n.length;u++){var i=n[u];0!==s[i]&&(r=!1)}r&&(a.splice(t--,1),e=o(o.s=n[0]))}return e}var r={},s={app:0},a=[];function o(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=r,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/vue2-rerendering-sor/";var u=window["webpackJsonp"]=window["webpackJsonp"]||[],i=u.push.bind(u);u.push=t,u=u.slice();for(var c=0;c<u.length;c++)t(u[c]);var l=i;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},4852:function(e,t,n){"use strict";n("70a6")},"56d7":function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"state",(function(){return Xe})),n.d(r,"getters",(function(){return Ye})),n.d(r,"mutations",(function(){return Ze}));n("e260"),n("e6cf"),n("cca6"),n("a79d");var s=n("2b0e"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"rr-dragscroll-container"},[n("router-view",{staticClass:"rr-app"})],1)},o=[],u=n("2877"),i={},c=Object(u["a"])(i,a,o,!1,null,null,null),l=c.exports,p=n("8c4f"),m=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h1",[e._v(" Vue.js Rerendering samples ")]),e._l(e.pages,(function(t){return n("div",{key:t.name},[n("h3",[n("router-link",{attrs:{to:t.name}},[e._v(" "+e._s(t.title)+" ")])],1),n("div",[e._v(" "+e._s(t.description)+" ")])])}))],2)},d=[],h=n("5530"),g=(n("7db0"),n("b0c0"),n("d81d"),{computed:{pages:function(){var e=Le.find((function(e){return"examples"===e.name}));return((e||{}).children||[]).map((function(e){return Object(h["a"])(Object(h["a"])({},e.meta||{}),{},{name:e.name})}))}}}),v=g,f=Object(u["a"])(v,m,d,!1,null,null,null),y=f.exports,b=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h1",[e._v(" "+e._s(e.$route.meta.title)+" ")]),n("p",[e._v(" "+e._s(e.$route.meta.description)+" ")]),e.$route.meta.instructions?n("p",[n("strong",[e._v("Instructions: ")]),e._v(" "+e._s(e.$route.meta.instructions)+" ")]):e._e(),e.$route.meta.explanation?n("p",[n("strong",[e._v("Explanation: ")]),e._v(" "+e._s(e.$route.meta.explanation)+" ")]):e._e(),n("p",[n("router-link",{attrs:{to:{name:"home"}}},[e._v(" Back to Samples List ")])],1),n("hr"),n("router-view")],1)},_=[],w={},x=Object(u["a"])(w,b,_,!1,null,null,null),T=x.exports,j=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("button",{on:{click:function(t){e.counter++}}},[e._v(" "+e._s(e.counter)+" ")]),n("Dummy",{attrs:{prop1:{a:1}}})],1)},k=[],O=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e._v(" Dummy: "+e._s(e.showProp1?e.prop1:"prop1 is hidden")+" ")])},D=[],U={props:{prop1:Object,showProp1:Boolean},updated:function(){console.log("Dummy updated")}},W=U,E=Object(u["a"])(W,O,D,!1,null,null,null),I=E.exports,$={components:{Dummy:I},data:function(){return{counter:0}}},S=$,M=Object(u["a"])(S,j,k,!1,null,null,null),C=M.exports,P=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("button",{on:{click:function(t){e.counter++}}},[e._v(" "+e._s(e.counter)+" ")]),n("Dummy",{attrs:{prop1:{a:1},"show-prop1":""}})],1)},N=[],F={components:{Dummy:I},data:function(){return{counter:0}}},R=F,B=Object(u["a"])(R,P,N,!1,null,null,null),q=B.exports,J=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("button",{on:{click:function(t){e.counter++}}},[e._v(" "+e._s(e.counter)+" ")]),n("Dummy",{attrs:{prop1:{a:e.counter?1:0}}})],1)},A=[],L={components:{Dummy:I},data:function(){return{counter:0}}},V=L,z=Object(u["a"])(V,J,A,!1,null,null,null),G=z.exports,H=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("button",{on:{click:function(t){e.counter++}}},[e._v(" "+e._s(e.counter)+" ")]),n("Dummy",{attrs:{prop1:{a:e.counter?1:0},"show-prop1":""}})],1)},K=[],Q={components:{Dummy:I},data:function(){return{counter:0}}},X=Q,Y=Object(u["a"])(X,H,K,!1,null,null,null),Z=Y.exports,ee=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("UserTagManager"),n("h3",[e._v(" Users with First Tag only ")]),e._l(e.usersWithTags,(function(e){return n("UserWithFirstTag",{key:e.id,attrs:{user:e.user,tag:e.tags[0]}})}))],2)},te=[],ne=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h3",[e._v(" User-Tag Manger ")]),n("table",{staticClass:"manager-table"},[n("thead",[n("tr",[n("th",{key:"stub-head"}),e._l(e.tags,(function(t){return n("th",{key:t.id,staticClass:"header header--column"},[e._v(" "+e._s(t.name)+" ")])}))],2)]),n("tbody",e._l(e.users,(function(t){return n("tr",{key:t.id},[n("td",{key:"row-header",staticClass:"header header--row"},[e._v(" "+e._s(t.name)+" ")]),e._l(e.tags,(function(r){return n("td",{key:r.id},[n("input",{attrs:{type:"checkbox"},domProps:{checked:!!e.userTags[t.id+"-"+r.id]},on:{change:function(n){return e.toggleUserTag(t.id,r.id,n)}}})])}))],2)})),0)])])},re=[],se=(n("07ac"),{computed:{users:function(){return Object.values(this.$store.state.example2.users)},tags:function(){return Object.values(this.$store.state.example2.tags)},userTags:function(){return this.$store.state.example2.userTags.reduce((function(e,t){return e[t.userId+"-"+t.tagId]=!0,e}),{})}},methods:{toggleUserTag:function(e,t,n){this.$store.commit("example2/setUserTag",{userId:e,tagId:t,value:n.target.checked})}}}),ae=se,oe=(n("4852"),Object(u["a"])(ae,ne,re,!1,null,"2946a53a",null)),ue=oe.exports,ie=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"rr-user"},[n("div",[e._v("User: "+e._s(e.user.name))]),n("div",[e._v("First Tag: "+e._s(e.tag?e.tag.name:"No tags"))])])},ce=[],le={props:{user:{type:Object,required:!0},tag:{type:[Object,void 0],default:void 0}},updated:function(){console.log("UserWithFirstTag updated for ".concat(this.user.name," user"))}},pe=le,me=Object(u["a"])(pe,ie,ce,!1,null,null,null),de=me.exports,he={components:{UserTagManager:ue,UserWithFirstTag:de},computed:{usersWithTags:function(){return this.$store.getters["example2/usersWithTags"]}}},ge=he,ve=Object(u["a"])(ge,ee,te,!1,null,null,null),fe=ve.exports,ye=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("UserTagManager"),n("h3",[e._v(" Users with Tags ")]),e._l(e.usersWithTags,(function(e){return n("UserWithTags",{key:e.id,attrs:{user:e.user,tags:e.tags}})}))],2)},be=[],_e=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"rr-user"},[n("div",[e._v("User: "+e._s(e.user.name))]),n("div",[e._v("Tags: "+e._s(e.tags.length?e.tags.map((function(e){return e.name})).join(", "):"No Tags"))])])},we=[],xe={props:{user:{type:Object,required:!0},tags:{type:Array,required:!0}},updated:function(){console.log("UserWithTags updated for ".concat(this.user.name," user"))}},Te=xe,je=Object(u["a"])(Te,_e,we,!1,null,null,null),ke=je.exports,Oe={components:{UserTagManager:ue,UserWithTags:ke},computed:{usersWithTags:function(){return this.$store.getters["example2/usersWithTags"]}}},De=Oe,Ue=Object(u["a"])(De,ye,be,!1,null,null,null),We=Ue.exports,Ee=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("UserTagManager"),n("h3",[e._v(" Users with Tags + SelectiveObjectReuse ")]),e._l(e.usersWithTags,(function(e){return n("UserWithTags",{key:e.id,attrs:{user:e.user,tags:e.tags}})}))],2)},Ie=[],$e={components:{UserTagManager:ue,UserWithTags:ke},computed:{usersWithTags:function(){return this.$store.getters["example2/usersWithTagsWrapped"]}}},Se=$e,Me=Object(u["a"])(Se,Ee,Ie,!1,null,null,null),Ce=Me.exports,Pe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("button",{on:{click:function(t){e.counter++}}},[e._v(" "+e._s(e.counter)+" ")]),n("Dummy",{attrs:{prop1:e.sor.wrap({a:e.counter?1:0}),"show-prop1":""}})],1)},Ne=[],Fe=n("15eb"),Re=n.n(Fe),Be={components:{Dummy:I},data:function(){return{counter:0,sor:new Re.a}}},qe=Be,Je=Object(u["a"])(qe,Pe,Ne,!1,null,null,null),Ae=Je.exports,Le=[{path:"/",name:"home",component:y},{path:"/examples",name:"examples",component:T,children:[{path:"/example1p1",name:"example1p1",component:C,meta:{title:"Example 1.1. Dummy with prop1={a: 1} (static object) that is not shown in Dummy's template",description:"\n[+vue2, +vue3]\nIt works correctly in vue2. Since prop1 is not shown in the template, rendering does not happen when the last changes.\nIt works correctly in vue3, but the reason is different: {a: 1} automatically cached in a separate computed and reused during parent component's render.\n          ",instructions:"\nClick on the button to increase the counter. Notice that Dummy does not trigger updated hook\n          "}},{path:"/example1p2",name:"example1p2",component:q,meta:{title:"Example 1.2. Dummy with prop1={a: 1} (static object) that is shown in Dummy's template",description:"\n[-vue2, +vue3]\nIt causes excessive rendering of Dummy despite the props looks to be the same.\nIt works correctly in vue3.\n          ",instructions:"\nClick on the button to increase the counter. Notice that Dummy triggers updated hook every time in vue2. It works correctly in vue3.\n          ",explanation:"\nProps that go to Dummy are not actually the same.\nEvery time the parent's component counter increases, it triggers render function to run.\nRender function includes :prop1=\"{a: 1}\".\nEvery time render function runs it creates a new {a: 1} object, then passes it to Dummy.\nSince Dummy's render function depends on prop1 object, this new-but-still the same {a: 1} causes rerendering.\n          "}},{path:"/example1p3",name:"example1p3",component:G,meta:{title:"Example 1.3. Dummy with dynamic prop1 that is not shown in Dummy's template",description:"\n[+vue2, -vue3]\nIt works correctly in vue2 because prop1 is not shown in Dummy's template.\nBut it causes excessive rendering in vue3. Wrapping {a: counter ? 1 : 0} into computed does not help because counter triggers it to rerun and a new object is generated every time.\n          ",instructions:"\nClick on the button to increase the counter. Notice Dummy's updated hook is triggered with every counter increase in vue3. It works correctly in vue2.\n          ",explanation:"\nDummy does not trigger updated hook in vue2 because prop1 is not used in the Dummy's template.\nBut the {a: counter ? 1 : 0} object is recreated every time, that's why Dummy's updated hook runs in vue3 every time.\n          "}},{path:"/example1p4",name:"example1p4",component:Z,meta:{title:"Example 1.4. Dummy with dynamic prop1 that is shown in Dummy's template",description:"\n[-vue2, -vue3]\nIt does not work properly nor in vue2 neither in vue3.\n          ",instructions:"\nClick on the button to increase the counter. Notice there's Dummy's updated hook triggered every time in vue2 and in vue3.\n          ",explanation:"\nIt causes rerendering in vue2 with the same reason as Example 1.2.\nIt causes rerendering in vue3 with the same reason as Example 1.3.\n          "}},{path:"/example2p1",name:"example2p1",component:fe,meta:{title:"Example 2.1. Users<->Tags list with only a first tag shown",description:"\n[+vue2, +vue3]\nIt works properly in vue2 and vue3\n          ",instructions:"\nManage user<->tag using checkboxes.\nNotice the update happens intuitively and in a correct way: <UserWithFirstTag> is rerendered only if first tag really changes in vue2 and vue3.\n          ",explanation:"\nIt works properly because the user and tags[0] objects sent to <UserWithFirstTag> are not recreated/changed in usersWithTags getter when new user-tag relation is created.\n          "}},{path:"/example2p2",name:"example2p2",component:We,meta:{title:"Example 2.2. Users<->Tags with all the assigned tags shown for every user",description:"\n[-vue2, -vue3]\nEvery new user-tag relation triggers all the <UserWithTags> components to rerender.\n          ",instructions:"\nManage user<->tag using checkboxes.\nNotice every checkbox change triggers all the <UserWithTags> components to update.\n          ",explanation:"\nThis happens because userWithTags getter produces a new array consisting on new objects, every object has tags property that is a new array.\n          "}},{path:"/example2p3",name:"example2p3",component:Ce,meta:{title:"Example 2.3 Users<->Tags with all the tags wrapped with SelectiveObjectReuse",description:"\n[+vue2, +vue3]\nThe previous getter's value is caches by SelectiveObjectReuse.\nWhen the new object is created, it's object-like parts smarterly replaced with the previously stored value.\n          "}},{path:"/example2p4",name:"example2p4",component:Ae,meta:{title:"Example 2.4 Dummy with dynamic prop1 that is shown in Dummy's template + SelectiveObjectReuse",description:"\n[+vue2, +vue3]\nThis is the updated Example 1.4 with the prop1 object wrapped with SelectiveObjectReuse. It works correctly in vue2 and vue3.\n          "}}]}];s["a"].use(p["a"]);var Ve=new p["a"]({mode:"hash",base:"/vue2-rerendering-sor/",routes:Le}),ze=Ve,Ge=n("2f62"),He=(n("4de4"),n("c740"),n("a434"),n("cc98")),Ke=n.n(He),Qe=new Re.a,Xe=function(){for(var e=[],t={},n={},r=0;r<9;r++){var s=Ke()();e.push(s),t[s]={id:s,name:"User ".concat(r+1)}}for(var a=0;a<5;a++){var o=Ke()();n[o]={id:o,name:"Tag ".concat(a+1)}}return{userIds:e,users:t,tags:n,userTags:[]}},Ye={usersWithTags:function(e){return e.userIds.map((function(t){return{id:t,user:e.users[t],tags:e.userTags.filter((function(e){return e.userId===t})).map((function(t){return e.tags[t.tagId]}))}}))},usersWithTagsWrapped:function(e,t){return Qe.wrap(t.usersWithTags,"usersWithTags")}},Ze={setUserTag:function(e,t){var n=t.userId,r=t.tagId,s=t.value,a=e.userTags.findIndex((function(e){return e.userId===n&&e.tagId===r}));-1===a&&s?e.userTags.push({userId:n,tagId:r}):-1===a||s||e.userTags.splice(a,1)}};s["a"].use(Ge["a"]);var et=new Ge["a"].Store({modules:{example2:Object(h["a"])(Object(h["a"])({},r),{},{namespaced:!0})}});n("e53c");s["a"].config.productionTip=!1,new s["a"]({router:ze,store:et,render:function(e){return e(l)}}).$mount("#app")},"70a6":function(e,t,n){},e53c:function(e,t,n){}});
//# sourceMappingURL=app.19f1b511.js.map